<!DOCTYPE html>
<html lang="en">

<head>
    <title>Melbourne | Tourist Guide</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
    <script language="JavaScript" type="text/javascript" src="script.js"></script>
</head>

<body>

    <header>
        <h2>Melbourne Tourist Guide</h2>
    </header>

    <section>
        <nav>
            <div class="dropdown">
                <button class="dropbtn" onclick="changeVisibility()">Cafes & Restuarants</button>
            </div>
            <a href="#music">Live Music Venues</a>
            <a href="#navigations">Navigation</a>
            <div class="dropdown">
                <button class="dropbtn">Transport
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content">
                    <a href="#">Trams</a>
                    <a href="#">Bus</a>
                    <a href="#">Bicycle</a>
                </div>
            </div>

            <div>
                <input type="checkbox" class="openSidebarMenu" id="openSidebarMenu">
                <label for="openSidebarMenu" class="sidebarIconToggle">
                    <div class="spinner diagonal part-1"></div>
                    <div class="spinner horizontal"></div>
                    <div class="spinner diagonal part-2"></div>
                </label>
                <div id="sidebarMenu">
                    <ul class="sidebarMenuInner">
                      <li> Travel Plan <span>Web Developer</span></li>
                        <div>
                          <ul id ="sidebarMenuInner"> 

                          </ul>
                        </div>
                      
                    </ul>
                </div>
            </div>
        </nav>
		
        <script>
            removeCard();
            addCard();
        </script>

        <article>

            <div id="map"></div>
            <script>
                mapboxgl.accessToken = 'pk.eyJ1IjoiamVmZnJleTY2NjY2NiIsImEiOiJja3N3NnJ3ODAxdzVzMndvM3Z0cHplem02In0.9ttA1DXJ9f-c9Vi15QDnWw'; 
                var map = new mapboxgl.Map({
                  container: 'map',
                  style: 'mapbox://styles/jeffrey666666/ckv3u99zp52b714s1kxpp8jbl',
                  center:[144.966748, -37.823716],
                  zoom:14.5
                });

                map.on('click', 'cafes-and-restaurants', e => {
                  new mapboxgl.Popup()
                  .setLngLat(e.lngLat)
                  .setHTML('<span class="popup-address">' + e.features[0].properties["Trading name"] + '<br>Address: ' + e.features[0].properties["Street address"] +'</span><br>' + 
                    '<br>Number of Seats: '+e.features[0].properties["Number of seats"] + ' <br>Seating type: ' + e.features[0].properties["Seating type"] + 
                    '<br><button class="add">Add to Travel Plan</button>')
                  .addTo(map);
                  addCard(e.features[0].properties,"cafe");
                });

                map.on('load', () => {
                    map.setLayoutProperty('cafes-and-restaurants','visibility','none')
                })
                
              </script>
        </article>
    </section>
    
    <div class="navigation">
       <h2 id="navigations">In this map, you can query the navigation route between any two locations on the map. At the same time, the map shows the bus and tram lines and stops, and you can get specific information by moving the mouse to the tram stop icon.</h2>
       <iframe id="mainIframe" name="mainIframe" src="navigation.html" frameborder="0" scrolling="auto" height="800" width=100%></iframe>
    </div>

    <footer>
        <p>
            All data presented above taken from
            <a href="https://data.melbourne.vic.gov.au/"> CITY OF MELBOURNE</a>
        </p>
    </footer>

<script>
    
    function changeVisibility(){
        var visibility = map.getLayoutProperty('cafes-and-restaurants',"visibility")
        map.setLayoutProperty('cafes-and-restaurants','visibility',visibility=="none"?'visible':'none')
    }
</script>

</body>

</html>
